{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-15T23:59:29.572Z",
  "summary": "REQ-2 appears partially implemented via a new React Query hook (useGetCaseCount) and DebugPanel wiring plus refresh/toast logic. REQ-1’s query-key change is partially visible (no longer uses the literal \"Not logged in\" in the query key), but the diff is truncated so it’s not verifiable that DebugPanel actually displays the cached actor initialization error or that the key exactly matches useActor’s structure in all states.",
  "missing_requirements": [
    {
      "id": "REQ-1",
      "requirement": "When logged in, DebugPanel reads the actor query state using the same query key structure as useActor (based on the actual principal string) and displays any cached actor initialization error if present.",
      "reason": "The diff shows DebugPanel now reads query state from queryClient.getQueryState(['actor', principalString]) and derives actorError, but the file is truncated before showing whether/where that error is rendered in the UI, and we cannot confirm the query key structure exactly matches useActor beyond this partial snippet.",
      "evidence": [
        "frontend/src/components/debug/DebugPanel.tsx"
      ]
    },
    {
      "id": "REQ-2",
      "requirement": "DebugPanel shows both counts (listCases-derived vs getCaseCount) with English source labels, and shows an error indicator for the specific count that fails while leaving the other unaffected.",
      "reason": "The diff shows DebugPanel fetches both useListCases() and useGetCaseCount() and has per-query isError flags, but the file is truncated before the rendering logic that would confirm both labeled counts are displayed and that per-count error indicators are shown independently.",
      "evidence": [
        "frontend/src/components/debug/DebugPanel.tsx"
      ]
    },
    {
      "id": "REQ-2",
      "requirement": "The refresh control in DebugPanel refreshes the relevant case-count queries and shows a success/error toast in English depending on the result.",
      "reason": "There is a handleRefreshCases() that refetches both queries and shows English toasts, but the diff is truncated before confirming this handler is actually wired to the DebugPanel refresh control/button.",
      "evidence": [
        "frontend/src/components/debug/DebugPanel.tsx"
      ]
    }
  ],
  "hallucinated_features": [],
  "confidence": 0.6,
  "changed_files": [
    "frontend-file-summaries.txt",
    "frontend/src/components/debug/DebugPanel.tsx",
    "frontend/src/hooks/useQueries.ts",
    "project_state.json"
  ]
}